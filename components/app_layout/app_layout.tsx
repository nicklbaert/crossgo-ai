import { useState, useEffect, useRef } from "react";
import router, { useRouter } from "next/router";
import styles from "./app_layout.module.css";
import PropTypes from "prop-types";
import Head from "next/head";

export { AppLayout };

AppLayout.propTypes = {
  content: PropTypes.node.isRequired,
  backTitle: PropTypes.string,
  title: PropTypes.string,
  subtitle: PropTypes.string,
  headingButton: PropTypes.any,
  onBack: PropTypes.func,
};

type AppLayoutArgs = {
  content: any;
  backTitle?: string;
  title?: string;
  subtitle?: string;
  headingButton?: any;
  onBack?: () => void;
};

function AppLayout({
  content,
  backTitle,
  title,
  subtitle,
  headingButton,
  onBack,
  ...props
}: AppLayoutArgs) {
  const router = useRouter();

  const [selectedTab, setSelectedTab] = useState("dashboard");

  useEffect(() => {
    //listen on browser back button cicked
    window.onpopstate = () => {
      console.log("router going back");
      //removeLast();
    };
  }, [router]);

  return (
    <div className={styles.all_wrap}>
      <div className={styles.wrapper}>
        <div className={styles.sidebar}>
          <div className={styles.logo}>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="169.347"
              height="31.824"
              viewBox="0 0 169.347 31.824"
            >
              <g
                id="Group_17562"
                data-name="Group 17562"
                transform="translate(-72 -60.99)"
              >
                <path
                  id="Path_24"
                  data-name="Path 24"
                  d="M-2308.879-463.176a.228.228,0,0,1-.229-.229v-1.749a.227.227,0,0,1,.229-.229h1.139a8.312,8.312,0,0,0,8.344-8.163v-4.371a10.906,10.906,0,0,1-8.37,4.142,10.646,10.646,0,0,1-10.657-10.612A10.648,10.648,0,0,1-2307.766-495a10.682,10.682,0,0,1,10.7,10.65v10.823a10.548,10.548,0,0,1-10.672,10.352Zm-7.246-21.212a8.416,8.416,0,0,0,8.359,8.448,8.407,8.407,0,0,0,8.358-8.448,8.416,8.416,0,0,0-8.358-8.453A8.417,8.417,0,0,0-2316.125-484.388Zm21.837,0A10.648,10.648,0,0,1-2283.631-495a10.646,10.646,0,0,1,10.658,10.612,10.649,10.649,0,0,1-10.658,10.612A10.646,10.646,0,0,1-2294.288-484.388Zm2.3,0a8.415,8.415,0,0,0,8.358,8.448,8.412,8.412,0,0,0,8.359-8.448,8.416,8.416,0,0,0-8.359-8.453A8.416,8.416,0,0,0-2291.99-484.388Zm-87.046,0A10.648,10.648,0,0,1-2368.379-495a10.646,10.646,0,0,1,10.658,10.612,10.649,10.649,0,0,1-10.658,10.612A10.646,10.646,0,0,1-2379.036-484.388Zm2.3,0a8.415,8.415,0,0,0,8.358,8.448,8.412,8.412,0,0,0,8.359-8.448,8.416,8.416,0,0,0-8.359-8.453A8.416,8.416,0,0,0-2376.737-484.388Zm-36.263,0A10.645,10.645,0,0,1-2402.343-495a10.585,10.585,0,0,1,6.527,2.231.227.227,0,0,1,.086.158.24.24,0,0,1-.057.173l-1.166,1.336a.23.23,0,0,1-.316.031,8.169,8.169,0,0,0-5.075-1.768,8.416,8.416,0,0,0-8.358,8.453,8.415,8.415,0,0,0,8.358,8.448,8.332,8.332,0,0,0,6.132-2.746.23.23,0,0,1,.32-.019l1.358,1.17a.239.239,0,0,1,.079.162.229.229,0,0,1-.06.169,10.7,10.7,0,0,1-7.828,3.427A10.646,10.646,0,0,1-2413-484.388Zm21.619,9.818a.228.228,0,0,1-.229-.229v-8.99a10.669,10.669,0,0,1,10.54-10.653h1.373a.231.231,0,0,1,.229.229v1.745a.228.228,0,0,1-.229.23h-1.256a8.413,8.413,0,0,0-8.359,8.449v8.99a.228.228,0,0,1-.229.229Zm55.3-.012a.228.228,0,0,1-.229-.229v-1.749a.228.228,0,0,1,.229-.229h9.6a3.556,3.556,0,0,0,3.6-3.4,3.491,3.491,0,0,0-3.6-3.359h-4.9a5.655,5.655,0,0,1-5.906-5.353,5.67,5.67,0,0,1,5.865-5.4h7.241a.228.228,0,0,1,.229.23v1.75a.228.228,0,0,1-.229.23h-7.2a3.461,3.461,0,0,0-3.6,3.19,3.382,3.382,0,0,0,3.528,3.134h5.06a5.642,5.642,0,0,1,5.827,5.578,5.772,5.772,0,0,1-5.906,5.612Zm-18.071,0a.228.228,0,0,1-.229-.229v-1.749a.228.228,0,0,1,.229-.229h9.6a3.556,3.556,0,0,0,3.6-3.4,3.491,3.491,0,0,0-3.6-3.359h-4.9a5.655,5.655,0,0,1-5.906-5.353,5.671,5.671,0,0,1,5.865-5.4h7.24a.228.228,0,0,1,.229.23v1.75a.228.228,0,0,1-.229.23h-7.2a3.461,3.461,0,0,0-3.6,3.19,3.383,3.383,0,0,0,3.529,3.134h5.06a5.637,5.637,0,0,1,5.823,5.578,5.772,5.772,0,0,1-5.906,5.612Z"
                  transform="translate(2485 555.99)"
                  fill="#21262c"
                />
                <path
                  id="Path_23"
                  data-name="Path 23"
                  d="M.087,0H4.814L6.525-4.408h8.468L16.675,0H21.6L13.079-21H8.613Zm8.7-10.266c.667-1.769,1.421-3.857,1.972-5.452h.058c.551,1.6,1.305,3.683,1.914,5.336l.87,2.349H7.946ZM22.736,0h4.611V-21H22.736Z"
                  transform="translate(214 82)"
                  fill="#21262c"
                />
              </g>
            </svg>
          </div>
          <div className={styles.profile}>
            <div className={styles.profile_picture}></div>
            <div className={styles.name}>Michael Jordan</div>
            <div className={styles.sub_name}>Basketball-Legende</div>
          </div>
          <div className={styles.links}>
            <div
              onClick={() => setSelectedTab("dashboard")}
              className={
                styles.link +
                " " +
                (selectedTab == "dashboard" ? styles.link_selected : "")
              }
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="25.805"
                height="25.798"
                viewBox="0 0 25.805 25.798"
              >
                <path
                  id="Path_25"
                  data-name="Path 25"
                  d="M-2401.763-469.312a12.8,12.8,0,0,1-7.4-3.618,12.8,12.8,0,0,1-3.7-7.362,12.8,12.8,0,0,1,1.508-8.1,12.8,12.8,0,0,1,6.1-5.535,1.5,1.5,0,0,1,1.975.775,1.5,1.5,0,0,1-.775,1.975,9.82,9.82,0,0,0-4.685,4.248,9.822,9.822,0,0,0-1.158,6.217,9.823,9.823,0,0,0,2.842,5.649,9.819,9.819,0,0,0,5.682,2.777,9.827,9.827,0,0,0,6.2-1.228,9.822,9.822,0,0,0,4.194-4.733,1.5,1.5,0,0,1,1.966-.8,1.5,1.5,0,0,1,.8,1.966,12.8,12.8,0,0,1-5.466,6.168,12.788,12.788,0,0,1-6.39,1.711A13.111,13.111,0,0,1-2401.763-469.312Zm1.668-11.287a1.5,1.5,0,0,1-1.5-1.5v-11.4a1.5,1.5,0,0,1,1.5-1.5,12.816,12.816,0,0,1,9.121,3.778,12.816,12.816,0,0,1,3.779,9.122,1.5,1.5,0,0,1-1.5,1.5Zm1.5-3h8.287a9.925,9.925,0,0,0-8.287-8.288Z"
                  transform="translate(2413 495)"
                  fill="#21262c"
                />
              </svg>
              Ãœbersicht
            </div>
            <div
              onClick={() => setSelectedTab("help")}
              className={
                styles.link +
                " " +
                (selectedTab == "help" ? styles.link_selected : "")
              }
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="25.803"
                height="25.803"
                viewBox="0 0 25.803 25.803"
              >
                <path
                  id="Path_26"
                  data-name="Path 26"
                  d="M-2409.221-472.976A12.815,12.815,0,0,1-2413-482.1a12.815,12.815,0,0,1,3.779-9.122A12.814,12.814,0,0,1-2400.1-495a12.814,12.814,0,0,1,9.122,3.779,12.814,12.814,0,0,1,3.779,9.122,12.814,12.814,0,0,1-3.779,9.122,12.814,12.814,0,0,1-9.122,3.779A12.814,12.814,0,0,1-2409.221-472.976ZM-2410-482.1a9.912,9.912,0,0,0,9.9,9.9,9.912,9.912,0,0,0,9.9-9.9,9.913,9.913,0,0,0-9.9-9.9A9.913,9.913,0,0,0-2410-482.1Zm8.5,5.976a1.5,1.5,0,0,1,1.5-1.5,1.5,1.5,0,0,1,1.5,1.5,1.5,1.5,0,0,1-1.5,1.5A1.5,1.5,0,0,1-2401.5-476.122Zm-.156-4.264a1.589,1.589,0,0,1,.991-1.994c.833-.284,2.395-1.163,2.395-2a1.916,1.916,0,0,0-1.6-1.9,1.916,1.916,0,0,0-2.135,1.256,1.5,1.5,0,0,1-1.914.918,1.5,1.5,0,0,1-.917-1.913,4.908,4.908,0,0,1,5.474-3.217,4.907,4.907,0,0,1,4.088,4.857,4.553,4.553,0,0,1-2.378,3.811,9.5,9.5,0,0,1-2.068,1.031,1.947,1.947,0,0,1-.655.117A1.283,1.283,0,0,1-2401.656-480.387Z"
                  transform="translate(2413 495)"
                  fill="#a8abac"
                />
              </svg>

              {"So funktioniert's"}
            </div>
          </div>
        </div>
        <div className={styles.content}>
          {backTitle && (
            <div onClick={onBack} className={styles.back}>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="15.765"
                height="15.764"
                viewBox="0 0 15.765 15.764"
              >
                <path
                  id="Path_27"
                  data-name="Path 27"
                  d="M-6430.472-479.383l-7.362-7.363a.5.5,0,0,1-.167-.372.5.5,0,0,1,.156-.362l7.374-7.374a.5.5,0,0,1,.708,0,.5.5,0,0,1,0,.708l-6.528,6.528h13.556a.5.5,0,0,1,.5.5.5.5,0,0,1-.5.5h-13.558l6.529,6.529a.5.5,0,0,1,0,.706.5.5,0,0,1-.354.147A.493.493,0,0,1-6430.472-479.383Z"
                  transform="translate(6438.001 495)"
                  fill="#21262c"
                />
              </svg>
              {backTitle}
            </div>
          )}

          <div className={styles.top_row}>
            <div className={styles.heading}>{title}</div>
            {headingButton && (
              <div className={styles.heading_button}>{headingButton}</div>
            )}
          </div>
          {subtitle && <div className={styles.subheading}>{subtitle}</div>}
          <div className={styles.section_content}>{content}</div>
        </div>
      </div>
    </div>
  );
}
